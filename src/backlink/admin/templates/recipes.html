{% extends "layout.html" %}
{% block title %}Recipes Â· Backlink Creator Bot{% endblock %}
{% block header %}Recipes{% endblock %}
{% block content %}
<div class="card border-0 shadow-sm mb-4">
  <div class="card-header bg-white">
    <h2 class="h6 mb-0">Create recipe</h2>
  </div>
  <div class="card-body">
    <form class="row g-3" hx-post="/api/recipes" hx-encoding="json" hx-swap="none"
      hx-headers='{"X-CSRF-Token": "{{ csrf_token }}"}'
      hx-on::afterRequest="if(event.detail.successful){BacklinkApp.refreshRecipes();}">
      <input type="hidden" name="X-CSRF-Token" value="{{ csrf_token }}">
      <div class="col-md-4">
        <label class="form-label" for="name">Name</label>
        <input class="form-control" type="text" id="name" name="metadata[name]" required>
      </div>
      <div class="col-md-3">
        <label class="form-label" for="site">Site</label>
        <input class="form-control" type="text" id="site" name="metadata[site]" required>
      </div>
      <div class="col-md-3">
        <label class="form-label" for="category">Category</label>
        <select class="form-select" id="category" name="metadata[category_id]" required>
          {% for category in categories %}
          <option value="{{ category.id }}">{{ category.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-2 d-flex align-items-end">
        <button class="btn btn-primary w-100" type="submit">Create</button>
      </div>
      <div class="col-12">
        <label class="form-label" for="actions">Actions JSON</label>
        <textarea class="form-control" id="actions" name="actions" rows="3" placeholder='[{"name": "visit", "action": "goto", "value": "https://example.com"}]' required></textarea>
      </div>
    </form>
    <p class="text-muted small mt-2">Use the trainer for rich recordings. Content requirements and variables can be edited after creation.</p>
  </div>
</div>
<div class="card border-0 shadow-sm">
  <div class="card-header bg-white">
    <h2 class="h6 mb-0">Recipe catalogue</h2>
  </div>
  {% include "partials/recipes_table.html" %}
</div>
{% endblock %}
