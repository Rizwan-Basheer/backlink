<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Backlink Creator Bot{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@codemirror/basic-setup@0.19.3/dist/basic-setup.min.css">
    <link rel="stylesheet" href="{{ url_for('static', path='css/styles.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/htmx.org@1.9.12"></script>
    <script src="https://cdn.jsdelivr.net/npm/htmx.org@1.9.12/dist/ext/json-enc.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.7/dist/cdn.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  </head>
  <body data-csrf="{{ csrf_token }}">
    <div class="d-flex">
      <aside class="bg-dark text-white flex-shrink-0 p-3" style="width: 260px; min-height: 100vh;">
        <a class="d-flex align-items-center mb-3 text-white text-decoration-none" href="/">
          <span class="fs-4"><i class="bi bi-diagram-3 me-2"></i>Backlink Admin</span>
        </a>
        <hr class="border-secondary">
        <ul class="nav nav-pills flex-column mb-auto">
          {% set path = request.url.path %}
          <li class="nav-item">
            <a class="nav-link text-white {% if path == '/' %}active{% endif %}" href="/">
              <i class="bi bi-speedometer2 me-2"></i>Dashboard
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white {% if path.startswith('/targets') %}active{% endif %}" href="/targets">
              <i class="bi bi-link-45deg me-2"></i>Targets
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white {% if path.startswith('/categories') %}active{% endif %}" href="/categories">
              <i class="bi bi-tags me-2"></i>Categories
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white {% if path.startswith('/recipes') %}active{% endif %}" href="/recipes">
              <i class="bi bi-journal-text me-2"></i>Recipes
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white {% if path.startswith('/trainer') %}active{% endif %}" href="/trainer">
              <i class="bi bi-controller me-2"></i>Trainer
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white {% if path.startswith('/executions') %}active{% endif %}" href="/executions">
              <i class="bi bi-play-circle me-2"></i>Executions
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white {% if path.startswith('/ai') %}active{% endif %}" href="/ai">
              <i class="bi bi-magic me-2"></i>AI Content
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white {% if path.startswith('/settings') %}active{% endif %}" href="/settings">
              <i class="bi bi-gear me-2"></i>Settings
            </a>
          </li>
        </ul>
        <hr class="border-secondary">
        <div>
          <p class="small mb-1 text-secondary">Signed in as</p>
          <p class="fw-semibold mb-3">{{ user.name }} <span class="badge bg-secondary">{{ user.role.value }}</span></p>
          <a class="btn btn-outline-light btn-sm" href="/logout">Sign out</a>
        </div>
      </aside>
      <main class="flex-grow-1 bg-light">
        <header class="bg-white shadow-sm py-3 px-4 d-flex justify-content-between align-items-center">
          <h1 class="h4 mb-0">{% block header %}{% endblock %}</h1>
          <span class="text-muted small">{{ now().strftime('%Y-%m-%d %H:%M') }}</span>
        </header>
        <section class="p-4">
          {% block content %}{% endblock %}
        </section>
      </main>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@codemirror/basic-setup@0.19.3/dist/basic-setup.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@codemirror/lang-yaml@0.19.2/dist/lang-yaml.min.js"></script>
    <script src="{{ url_for('static', path='js/app.js') }}"></script>
  </body>
</html>
